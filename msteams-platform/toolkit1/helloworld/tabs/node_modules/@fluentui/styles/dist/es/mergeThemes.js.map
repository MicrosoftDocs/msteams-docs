{"version":3,"sources":["mergeThemes.ts"],"names":["callable","isEnabled","isDebugEnabled","deepmerge","objectKeyToValues","toCompactArray","withDebugId","emptyTheme","siteVariables","fontSizes","componentVariables","componentStyles","fontFaces","staticStyles","animations","mergeComponentStyles__PROD","stylesA","stylesB","result","Object","keys","forEach","partName","slotA","slotB","mergedStyleFunction","styleParam","mergeComponentStyles__DEV","mergedKeys","slotName","_debug","undefined","styles","debugId","_debugId","debugA","resolvedStylesA","debugB","resolvedStylesB","merged","concat","mergeComponentStyles","process","env","NODE_ENV","mergeComponentVariables__PROD","initial","sources","filteredSources","filter","Boolean","length","reduce","acc","next","mergeComponentVariables","accumulatedVariables","fn","computedComponentVariables","mergeComponentVariables__DEV","computedDebug","resolved","input","_invertedKeys","mergeSiteVariables__PROD","mergeSiteVariables__DEV","accumulatedSiteVariables","nextSiteVariables","key","mergeSiteVariables","mergeThemeVariables__PROD","displayNames","displayName","mergeThemeVariables__DEV","source","mergeThemeVariables","mergeThemeStyles","themeComponentStyles","stylesByPart","mergeFontFaces","mergeStaticStyles","mergeAnimations","assign","mergeStyles","args","mergeThemes","themes","nextDebugId"],"mappings":"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","sourcesContent":["import * as _ from 'lodash';\n\nimport { callable } from './callable';\nimport {\n  ComponentSlotStyle,\n  ComponentSlotStylesInput,\n  ComponentSlotStylesPrepared,\n  ComponentVariablesInput,\n  ComponentVariablesPrepared,\n  FontFace,\n  SiteVariablesInput,\n  SiteVariablesPrepared,\n  StaticStyle,\n  ThemeAnimation,\n  ThemeComponentStylesInput,\n  ThemeComponentStylesPrepared,\n  ThemeComponentVariablesInput,\n  ThemeComponentVariablesPrepared,\n  ThemeInput,\n  ThemePrepared,\n} from './types';\n\nimport { isEnabled as isDebugEnabled } from './debugEnabled';\nimport { deepmerge } from './deepmerge';\nimport { objectKeyToValues } from './objectKeysToValues';\nimport { toCompactArray } from './toCompactArray';\nimport { withDebugId } from './withDebugId';\n\nexport const emptyTheme: ThemePrepared = {\n  siteVariables: {\n    fontSizes: {},\n  },\n  componentVariables: {},\n  componentStyles: {},\n  fontFaces: [],\n  staticStyles: [],\n  animations: {},\n};\n\n// ----------------------------------------\n// Component level merge functions\n// ----------------------------------------\n\n/**\n * Merges a single component's styles (keyed by component part) with another component's styles.\n */\nexport const mergeComponentStyles__PROD: typeof mergeComponentStyles = (stylesA, stylesB) => {\n  const result = {};\n\n  if (stylesA) {\n    Object.keys(stylesA).forEach(partName => {\n      const slotA = stylesA[partName];\n      const slotB = stylesB?.[partName];\n\n      // if there is no source, merging is a no-op, skip it\n      if (typeof slotA === 'undefined' || slotA === null) {\n        return;\n      }\n\n      // no target means source doesn't need to merge onto anything\n      // just ensure source is callable (prepared format)\n      if (typeof slotB === 'undefined' || slotB === null) {\n        result[partName] = typeof slotA === 'function' ? slotA : () => slotA;\n        return;\n      }\n\n      if (slotA === slotB) {\n        result[partName] = typeof slotA === 'function' ? slotA : () => slotA;\n      }\n    });\n  }\n\n  if (stylesB) {\n    Object.keys(stylesB).forEach(partName => {\n      const slotA = stylesA?.[partName];\n      const slotB = stylesB[partName];\n\n      // if there is no source, merging is a no-op, skip it\n      if (typeof slotB === 'undefined' || slotB === null) {\n        return;\n      }\n\n      // no target means source doesn't need to merge onto anything\n      // just ensure source is callable (prepared format)\n      if (typeof slotA === 'undefined' || slotA === null) {\n        result[partName] = typeof slotB === 'function' ? slotB : () => slotB;\n        return;\n      }\n\n      if (slotA === slotB) {\n        return;\n      }\n\n      // We have both target and source, replace with merge fn\n      result[partName] = function mergedStyleFunction(styleParam) {\n        // originalTarget is always prepared, fn is guaranteed\n        return _.merge(\n          typeof slotA === 'function' ? slotA(styleParam) : slotA,\n          typeof slotB === 'function' ? slotB(styleParam) : slotB,\n        );\n      };\n    });\n  }\n\n  return result;\n};\n\nexport const mergeComponentStyles__DEV: typeof mergeComponentStyles = (stylesA, stylesB) => {\n  if (!isDebugEnabled) {\n    return mergeComponentStyles__PROD(stylesA, stylesB);\n  }\n\n  const mergedKeys = [...(stylesA ? Object.keys(stylesA) : []), ...(stylesB ? Object.keys(stylesB) : [])];\n  const result = {};\n\n  mergedKeys.forEach(slotName => {\n    const slotA = styleParam => {\n      const { _debug = undefined, ...styles } = callable(stylesA?.[slotName])(styleParam) || {};\n\n      // new object required to prevent circular JSON structure error in <Debug />\n      return {\n        ...styles,\n        _debug: _debug || [{ styles: { ...styles }, debugId: stylesA._debugId }],\n      };\n    };\n\n    const slotB = styleParam => {\n      const { _debug = undefined, ...styles } = callable(stylesB?.[slotName])(styleParam) || {};\n\n      // new object required to prevent circular JSON structure error in <Debug />\n      return {\n        ...styles,\n        _debug: _debug || [{ styles: { ...styles }, debugId: stylesB._debugId }],\n      };\n    };\n\n    if (stylesA?.[slotName] && stylesB?.[slotName]) {\n      // We have both, replace with merge fn\n      result[slotName] = styleParam => {\n        // slot* are always prepared, fn is guaranteed, _debug always exists\n        const { _debug: debugA, ...resolvedStylesA } = slotA(styleParam);\n        const { _debug: debugB, ...resolvedStylesB } = slotB(styleParam);\n\n        const merged = _.merge(resolvedStylesA, resolvedStylesB);\n\n        merged._debug = debugA.concat(debugB || { styles: resolvedStylesB, debugId: resolvedStylesB._debugId });\n\n        return merged;\n      };\n    } else if (stylesA?.[slotName]) {\n      result[slotName] = slotA;\n    } else if (stylesB?.[slotName]) {\n      result[slotName] = slotB;\n    }\n  });\n\n  return result;\n};\n\nexport const mergeComponentStyles: (\n  stylesA: ComponentSlotStylesInput | null | undefined,\n  stylesB: ComponentSlotStylesInput | null | undefined,\n) => ComponentSlotStylesPrepared =\n  process.env.NODE_ENV === 'production' ? mergeComponentStyles__PROD : mergeComponentStyles__DEV;\n\n/**\n * Merges a single component's variables with another component's variables.\n */\nexport const mergeComponentVariables__PROD = (...sources: ComponentVariablesInput[]): ComponentVariablesPrepared => {\n  const initial = () => ({});\n\n  // filtering is required as some arguments can be undefined\n  const filteredSources = sources.filter(Boolean);\n\n  // a short circle to avoid calls of deepmerge()\n  if (filteredSources.length === 1) {\n    return typeof filteredSources[0] === 'function' ? filteredSources[0] : callable(filteredSources[0]);\n  }\n\n  return filteredSources.reduce<ComponentVariablesPrepared>((acc, next) => {\n    return function mergeComponentVariables(...args) {\n      const accumulatedVariables = acc(...args);\n      const fn = typeof next === 'function' ? next : callable(next);\n      const computedComponentVariables = fn(...args);\n\n      return deepmerge(accumulatedVariables, computedComponentVariables);\n    };\n  }, initial);\n};\n\nexport const mergeComponentVariables__DEV = (...sources: ComponentVariablesInput[]): ComponentVariablesPrepared => {\n  if (!isDebugEnabled) {\n    return mergeComponentVariables__PROD(...sources);\n  }\n  const initial = () => ({});\n\n  return sources.reduce<ComponentVariablesPrepared>((acc, next) => {\n    return siteVariables => {\n      const { _debug = [], ...accumulatedVariables } = acc(siteVariables);\n      const { _debug: computedDebug = undefined, _debugId = undefined, ...computedComponentVariables } =\n        callable(next)(siteVariables) || {};\n\n      const merged = deepmerge(accumulatedVariables, computedComponentVariables);\n\n      merged._debug = _debug.concat(\n        computedDebug || {\n          resolved: computedComponentVariables,\n          debugId: _debugId,\n          input: siteVariables\n            ? siteVariables._invertedKeys && callable(next)(siteVariables._invertedKeys)\n            : callable(next)(),\n        },\n      );\n      return merged;\n    };\n  }, initial);\n};\n\nexport const mergeComponentVariables =\n  process.env.NODE_ENV === 'production' ? mergeComponentVariables__PROD : mergeComponentVariables__DEV;\n\n// ----------------------------------------\n// Theme level merge functions\n// ----------------------------------------\n\n/**\n * Site variables can safely be merged at each Provider in the tree.\n * They are flat objects and do not depend on render-time values, such as props.\n */\nexport const mergeSiteVariables__PROD = (\n  ...sources: (SiteVariablesInput | null | undefined)[]\n): SiteVariablesPrepared => {\n  const initial: SiteVariablesPrepared = {\n    fontSizes: {},\n  };\n  return deepmerge(initial, ...sources);\n};\n\nexport const mergeSiteVariables__DEV = (\n  ...sources: (SiteVariablesInput | null | undefined)[]\n): SiteVariablesPrepared => {\n  if (!isDebugEnabled) {\n    return mergeSiteVariables__PROD(...sources);\n  }\n\n  const initial: SiteVariablesPrepared = {\n    fontSizes: {},\n  };\n\n  return sources.reduce<SiteVariablesPrepared>((acc, next) => {\n    const { _debug = [], ...accumulatedSiteVariables } = acc;\n    const { _debug: computedDebug = undefined, _invertedKeys = undefined, _debugId = undefined, ...nextSiteVariables } =\n      next || {};\n\n    const merged = deepmerge({ ...accumulatedSiteVariables, _invertedKeys: undefined }, nextSiteVariables);\n    merged._debug = _debug.concat(computedDebug || { resolved: nextSiteVariables, debugId: _debugId });\n    merged._invertedKeys = _invertedKeys || objectKeyToValues(merged, key => `siteVariables.${key}`);\n    return merged;\n  }, initial);\n};\n\nexport const mergeSiteVariables =\n  process.env.NODE_ENV === 'production' ? mergeSiteVariables__PROD : mergeSiteVariables__DEV;\n\n/**\n * Component variables can be objects, functions, or an array of these.\n * The functions must be called with the final result of siteVariables, otherwise\n *   the component variable objects would have no ability to apply siteVariables.\n * Therefore, componentVariables must be resolved by the component at render time.\n * We instead pass down call stack of component variable functions to be resolved later.\n */\n\nexport const mergeThemeVariables__PROD = (\n  ...sources: (ThemeComponentVariablesInput | null | undefined)[]\n): ThemeComponentVariablesPrepared => {\n  const displayNames = _.union(..._.map(sources, _.keys));\n  return displayNames.reduce((componentVariables, displayName) => {\n    componentVariables[displayName] = mergeComponentVariables(..._.map(sources, displayName));\n    return componentVariables;\n  }, {});\n};\n\nexport const mergeThemeVariables__DEV = (\n  ...sources: (ThemeComponentVariablesInput | null | undefined)[]\n): ThemeComponentVariablesPrepared => {\n  if (!isDebugEnabled) {\n    return mergeThemeVariables__PROD(...sources);\n  }\n\n  const displayNames = _.union(..._.map(sources, _.keys));\n  return displayNames.reduce((componentVariables, displayName) => {\n    componentVariables[displayName] = mergeComponentVariables(\n      ..._.map(sources, source => source && withDebugId(source[displayName], source._debugId)),\n    );\n    return componentVariables;\n  }, {});\n};\n\nexport const mergeThemeVariables =\n  process.env.NODE_ENV === 'production' ? mergeThemeVariables__PROD : mergeThemeVariables__DEV;\n\n/**\n * See mergeThemeVariables() description.\n * Component styles adhere to the same pattern as component variables, except\n *   that they return style objects.\n */\nexport const mergeThemeStyles = (\n  ...sources: (ThemeComponentStylesInput | null | undefined)[]\n): ThemeComponentStylesPrepared => {\n  const initial: ThemeComponentStylesPrepared = {};\n\n  return sources.reduce<ThemeComponentStylesPrepared>((themeComponentStyles, next) => {\n    _.forEach(next, (stylesByPart, displayName) => {\n      themeComponentStyles[displayName] = mergeComponentStyles(\n        themeComponentStyles[displayName],\n        withDebugId(stylesByPart, (next as ThemeComponentStylesPrepared & { _debugId: string })._debugId),\n      );\n    });\n\n    return themeComponentStyles;\n  }, initial);\n};\n\nexport const mergeFontFaces = (...sources: FontFace[]) => {\n  return toCompactArray<FontFace>(...sources);\n};\n\nexport const mergeStaticStyles = (...sources: StaticStyle[]) => {\n  return toCompactArray<StaticStyle>(...sources);\n};\n\nexport const mergeAnimations = (...sources: { [key: string]: ThemeAnimation }[]): { [key: string]: ThemeAnimation } => {\n  return Object.assign({}, ...sources);\n};\n\nexport const mergeStyles = (...sources: ComponentSlotStyle[]) => {\n  return (...args) => {\n    return sources.reduce((acc, next) => {\n      return _.merge(acc, callable(next)(...args));\n    }, {});\n  };\n};\n\nexport const mergeThemes = (...themes: ThemeInput[]): ThemePrepared => {\n  return themes.reduce<ThemePrepared>(\n    (acc: ThemePrepared, next: ThemeInput) => {\n      if (!next) return acc;\n      const nextDebugId = next['_debugId'];\n\n      acc.siteVariables = mergeSiteVariables(acc.siteVariables, withDebugId(next.siteVariables, nextDebugId));\n\n      acc.componentVariables = mergeThemeVariables(\n        acc.componentVariables,\n        withDebugId(next.componentVariables, nextDebugId),\n      );\n\n      acc.componentStyles = mergeThemeStyles(acc.componentStyles, withDebugId(next.componentStyles, nextDebugId));\n\n      acc.fontFaces = mergeFontFaces(...acc.fontFaces, ...(next.fontFaces || []));\n\n      acc.staticStyles = mergeStaticStyles(...acc.staticStyles, ...(next.staticStyles || []));\n\n      acc.animations = mergeAnimations(acc.animations, next.animations);\n\n      return acc;\n    },\n    // .reduce() will modify \"emptyTheme\" object, so we should clone it before actual usage\n    { ...emptyTheme },\n  );\n};\n"],"file":"mergeThemes.js"}