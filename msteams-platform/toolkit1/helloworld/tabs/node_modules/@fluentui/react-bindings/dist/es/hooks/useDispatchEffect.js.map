{"version":3,"sources":["hooks/useDispatchEffect.ts"],"names":["React","useDispatchEffect","dispatchEffect","latestEffect","useRef","latestEvent","current","dispatch","useCallback","e","action","args","sideEffect","prevState","nextState"],"mappings":"AACA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AAQA,OAAO,IAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,CAC/BC,cAD+B,EAEc;AAC7C,MAAMC,YAAY,GAAGH,KAAK,CAACI,MAAN,CAAoCF,cAApC,CAArB;AACA,MAAMG,WAAW,GAAGL,KAAK,CAACI,MAAN,CAAmC,IAAnC,CAApB;AAEAD,EAAAA,YAAY,CAACG,OAAb,GAAuBJ,cAAvB;AAEA,MAAMK,QAAQ,GAAGP,KAAK,CAACQ,WAAN,CAAuC,UAACC,CAAD,EAAIC,MAAJ,EAAwB;AAC9EL,IAAAA,WAAW,CAACC,OAAZ,GAAsBG,CAAtB;;AAD8E,sCAATE,IAAS;AAATA,MAAAA,IAAS;AAAA;;AAG9ED,IAAAA,MAAM,MAAN,SAAUC,IAAV;AACAN,IAAAA,WAAW,CAACC,OAAZ,GAAsB,IAAtB;AACD,GALgB,EAKd,EALc,CAAjB;AAMA,MAAMM,UAAU,GAAGZ,KAAK,CAACQ,WAAN,CAAqC,UAACK,SAAD,EAAYC,SAAZ,EAA0B;AAChF,WAAOX,YAAY,CAACG,OAAb,CAAqBD,WAAW,CAACC,OAAjC,EAA2DO,SAA3D,EAAsEC,SAAtE,CAAP;AACD,GAFkB,EAEhB,EAFgB,CAAnB;AAIA,SAAO,CAACP,QAAD,EAAWK,UAAX,CAAP;AACD,CAnBM","sourcesContent":["import { AnyAction, SideEffect } from '@fluentui/state';\nimport * as React from 'react';\n\ntype Dispatch<Action extends AnyAction> = (e: DispatchEvent, action: Action, ...args: Parameters<Action>) => void;\n\ntype DispatchEffect<State> = (e: DispatchEvent, prevState: State, nextState: State) => void;\n\ntype DispatchEvent = React.SyntheticEvent | Event;\n\nexport const useDispatchEffect = <State>(\n  dispatchEffect: DispatchEffect<State>,\n): [Dispatch<AnyAction>, SideEffect<State>] => {\n  const latestEffect = React.useRef<DispatchEffect<State>>(dispatchEffect);\n  const latestEvent = React.useRef<DispatchEvent | null>(null);\n\n  latestEffect.current = dispatchEffect;\n\n  const dispatch = React.useCallback<Dispatch<AnyAction>>((e, action, ...args) => {\n    latestEvent.current = e;\n\n    action(...args);\n    latestEvent.current = null;\n  }, []);\n  const sideEffect = React.useCallback<SideEffect<State>>((prevState, nextState) => {\n    return latestEffect.current(latestEvent.current as DispatchEvent, prevState, nextState);\n  }, []);\n\n  return [dispatch, sideEffect];\n};\n"],"file":"useDispatchEffect.js"}