{"version":3,"sources":["components/Toolbar/ToolbarItem.tsx"],"names":["toolbarItemBehavior","compose","getElementType","mergeVariablesOverrides","useUnhandledProps","useFluentContext","useAccessibility","useStyles","useTelemetry","useContextSelectors","handleRef","Ref","EventListener","Unstable_NestingAuto","customPropTypes","PropTypes","React","createShorthand","doesNodeContainClick","commonPropTypes","childrenExist","partitionPopperPropsFromShorthand","Popper","ToolbarMenu","Popup","ToolbarVariablesContext","ToolbarVariablesProvider","ToolbarItemWrapper","ToolbarItemIcon","ToolbarMenuContext","toolbarItemClassName","ToolbarItem","props","ref","composeOptions","context","displayName","telemetry","setStart","setEnd","accessibility","active","className","design","icon","children","disabled","disabledFocusable","popup","menuOpen","wrapper","styles","variables","menu","positioningProps","itemRef","useRef","menuRef","parentVariables","useContext","mergedVariables","menuSlot","v","slots","getA11yProps","debugName","actionHandlers","performClick","event","preventDefault","handleClick","performWrapperClick","handleWrapperClick","closeMenuAndFocusTrigger","trySetMenuOpen","current","doNotNavigateNextToolbarItem","stopPropagation","mapPropsToBehavior","as","String","hasMenu","hasPopup","rtl","mapPropsToStyles","mapPropsToInlineStyles","unstable_props","classes","handleBlur","e","handleFocus","nativeEvent","target","handleOutsideClick","getRefs","isItemClick","isNestedClick","childRef","isInside","newValue","handleMenuOverrides","predefinedProps","onBlur","isInsideOrMenuTrigger","contains","relatedTarget","onItemClick","itemProps","ElementType","slotProps","resolveSlotProps","unhandledProps","handledProps","itemElement","node","root","onFocus","onClick","submenuElement","nestingRef","defaultProps","overrideProps","popupElement","trigger","undefined","contentElement","wrapperElement","trapFocus","shorthandConfig","mappedProp","propTypes","createCommon","bool","shorthandAllowingChildren","oneOfType","arrayOf","onMenuOpenChange","func","shape","never","string"],"mappings":"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","sourcesContent":["import { Accessibility, toolbarItemBehavior, ToolbarItemBehaviorProps } from '@fluentui/accessibility';\nimport {\n  compose,\n  getElementType,\n  mergeVariablesOverrides,\n  useUnhandledProps,\n  useFluentContext,\n  useAccessibility,\n  useStyles,\n  useTelemetry,\n  useContextSelectors,\n} from '@fluentui/react-bindings';\nimport { handleRef, Ref } from '@fluentui/react-component-ref';\nimport { EventListener } from '@fluentui/react-component-event-listener';\nimport { GetRefs, NodeRef, Unstable_NestingAuto } from '@fluentui/react-component-nesting-registry';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport * as _ from 'lodash';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\n\nimport {\n  createShorthand,\n  doesNodeContainClick,\n  UIComponentProps,\n  ChildrenComponentProps,\n  ContentComponentProps,\n  commonPropTypes,\n  childrenExist,\n} from '../../utils';\nimport { ComponentEventHandler, ShorthandValue, ShorthandCollection } from '../../types';\nimport { partitionPopperPropsFromShorthand, Popper, PopperShorthandProps } from '../../utils/positioner';\n\nimport { ToolbarMenu, ToolbarMenuProps } from './ToolbarMenu';\nimport { Popup, PopupProps } from '../Popup/Popup';\nimport { ToolbarMenuItemProps } from '../Toolbar/ToolbarMenuItem';\nimport { ToolbarItemShorthandKinds } from './Toolbar';\nimport { ToolbarVariablesContext, ToolbarVariablesProvider } from './toolbarVariablesContext';\nimport { ToolbarItemWrapper, ToolbarItemWrapperProps } from './ToolbarItemWrapper';\nimport { ToolbarItemIcon, ToolbarItemIconProps } from './ToolbarItemIcon';\nimport { ToolbarItemSubscribedValue, ToolbarMenuContext } from './toolbarMenuContext';\n\nexport interface ToolbarItemProps extends UIComponentProps, ChildrenComponentProps, ContentComponentProps {\n  /** Accessibility behavior if overridden by the user. */\n  accessibility?: Accessibility<ToolbarItemBehaviorProps>;\n\n  /** A toolbar item can be active. */\n  active?: boolean;\n\n  /** A toolbar item can show it is currently unable to be interacted with. */\n  disabled?: boolean;\n\n  /** A toolbar item can be disabled and focusable at the same time. */\n  disabledFocusable?: boolean;\n\n  /** Name or shorthand for Toolbar Item Icon */\n  icon?: ShorthandValue<ToolbarItemIconProps>;\n\n  /**\n   * Shorthand for the submenu.\n   * If submenu is specified, the item is wrapped to group the item and the menu elements together.\n   */\n  menu?:\n    | ShorthandValue<ToolbarMenuProps & { popper?: PopperShorthandProps }>\n    | ShorthandCollection<ToolbarMenuItemProps, ToolbarItemShorthandKinds>;\n\n  /** Indicates if the menu inside the item is open. */\n  menuOpen?: boolean;\n\n  /**\n   * Event for request to change 'menuOpen' value.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props and proposed value.\n   */\n  onMenuOpenChange?: ComponentEventHandler<ToolbarItemProps>;\n\n  /**\n   * Called on click.\n   *\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onClick?: ComponentEventHandler<ToolbarItemProps>;\n\n  /**\n   * Called after user's focus.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onFocus?: ComponentEventHandler<ToolbarItemProps>;\n\n  /**\n   * Called after item blur.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onBlur?: ComponentEventHandler<ToolbarItemProps>;\n\n  /**\n   * Attaches a `Popup` component to the ToolbarItem.\n   * Accepts all props as a `Popup`, except `trigger` and `children`.\n   * Traps focus by default.\n   * @see PopupProps\n   */\n  popup?: Omit<PopupProps, 'trigger' | 'children'> | string;\n\n  /** Shorthand for the wrapper component. The item is wrapped only if it contains a menu! */\n  wrapper?: ShorthandValue<ToolbarItemWrapperProps>;\n}\n\nexport type ToolbarItemStylesProps = Required<Pick<ToolbarItemProps, 'active' | 'disabled'>>;\n\nexport const toolbarItemClassName = 'ui-toolbar__item';\n\n/**\n * A ToolbarItem renders Toolbar item as a button with an icon.\n */\nexport const ToolbarItem = compose<'button', ToolbarItemProps, ToolbarItemStylesProps, {}, {}>(\n  (props, ref, composeOptions) => {\n    const context = useFluentContext();\n    const { setStart, setEnd } = useTelemetry(composeOptions.displayName, context.telemetry);\n    setStart();\n\n    const {\n      accessibility,\n      active,\n      className,\n      design,\n      icon,\n      children,\n      disabled,\n      disabledFocusable,\n      popup,\n      menuOpen,\n      wrapper,\n      styles,\n      variables,\n    } = props;\n    const [menu, positioningProps] = partitionPopperPropsFromShorthand(props.menu);\n\n    const itemRef = React.useRef<HTMLElement>();\n    const menuRef = React.useRef<HTMLElement>();\n\n    const parentVariables = React.useContext(ToolbarVariablesContext);\n    const mergedVariables = mergeVariablesOverrides(parentVariables, variables);\n\n    const { menuSlot } = (useContextSelectors(ToolbarMenuContext, {\n      menuSlot: v => v.slots.menu,\n    }) as unknown) as ToolbarItemSubscribedValue; // TODO: we should improve typings for the useContextSelectors\n\n    const getA11yProps = useAccessibility(accessibility, {\n      debugName: composeOptions.displayName,\n      actionHandlers: {\n        performClick: event => {\n          event.preventDefault();\n          handleClick(event);\n        },\n        performWrapperClick: event => {\n          handleWrapperClick(event);\n        },\n        closeMenuAndFocusTrigger: event => {\n          trySetMenuOpen(false, event);\n          _.invoke(itemRef.current, 'focus');\n        },\n        doNotNavigateNextToolbarItem: event => {\n          event.stopPropagation();\n        },\n      },\n      mapPropsToBehavior: () => ({\n        as: String(props.as),\n        disabled,\n        disabledFocusable,\n        hasMenu: !!menu,\n        hasPopup: !!popup,\n        menuOpen,\n        active,\n      }),\n      rtl: context.rtl,\n    });\n    const { classes } = useStyles<ToolbarItemStylesProps>(composeOptions.displayName, {\n      className: composeOptions.className,\n      composeOptions,\n      mapPropsToStyles: () => ({ active, disabled: disabled || disabledFocusable }),\n      mapPropsToInlineStyles: () => ({\n        className,\n        design,\n        styles,\n        variables: mergedVariables,\n      }),\n      rtl: context.rtl,\n      unstable_props: props,\n    });\n\n    const handleBlur = (e: React.SyntheticEvent) => {\n      _.invoke(props, 'onBlur', e, props);\n    };\n\n    const handleFocus = (e: React.SyntheticEvent) => {\n      _.invoke(props, 'onFocus', e, props);\n    };\n\n    const handleClick = (e: React.MouseEvent | React.KeyboardEvent) => {\n      if (disabled || disabledFocusable) {\n        e.preventDefault();\n        return;\n      }\n\n      if (menu) {\n        trySetMenuOpen(!menuOpen, e);\n      }\n\n      _.invoke(props, 'onClick', e, props);\n    };\n\n    const handleWrapperClick = (e: React.MouseEvent | React.KeyboardEvent) => {\n      if (menu) {\n        if (doesNodeContainClick(menuRef.current, e.nativeEvent as MouseEvent, context.target, false)) {\n          trySetMenuOpen(false, e);\n        }\n      }\n    };\n\n    const handleOutsideClick = (getRefs: GetRefs) => (e: MouseEvent) => {\n      const isItemClick = doesNodeContainClick(itemRef.current, e, context.target);\n      const isNestedClick = _.some(getRefs(), (childRef: NodeRef) => {\n        return doesNodeContainClick(childRef.current as HTMLElement, e, context.target);\n      });\n      const isInside = isItemClick || isNestedClick;\n\n      if (!isInside) {\n        trySetMenuOpen(false, e);\n      }\n    };\n\n    const trySetMenuOpen = (newValue: boolean, e: Event | React.SyntheticEvent) => {\n      _.invoke(props, 'onMenuOpenChange', e, { ...props, menuOpen: newValue });\n    };\n\n    const handleMenuOverrides = (getRefs: GetRefs) => (predefinedProps: ToolbarMenuProps) => ({\n      onBlur: (e: React.FocusEvent) => {\n        const isInsideOrMenuTrigger = _.some(getRefs(), (childRef: NodeRef) => {\n          return (\n            childRef.current.contains(e.relatedTarget as HTMLElement) ||\n            itemRef.current.contains(e.relatedTarget as HTMLElement)\n          );\n        });\n\n        if (!isInsideOrMenuTrigger) {\n          trySetMenuOpen(false, e);\n        }\n      },\n      onItemClick: (e, itemProps: ToolbarMenuItemProps) => {\n        const { popup, menuOpen } = itemProps;\n        _.invoke(predefinedProps, 'onItemClick', e, itemProps);\n        if (popup) {\n          return;\n        }\n        // TODO: should we pass toolbarMenuItem to the user callback so he can decide if he wants to close the menu?\n        trySetMenuOpen(menuOpen, e);\n      },\n    });\n\n    const ElementType = getElementType(props);\n    const slotProps = composeOptions.resolveSlotProps<ToolbarItemProps>(props);\n    const unhandledProps = useUnhandledProps(composeOptions.handledProps, props);\n\n    const itemElement = (\n      <Ref\n        innerRef={node => {\n          itemRef.current = node;\n          handleRef(ref, node);\n        }}\n      >\n        <ElementType\n          {...getA11yProps('root', {\n            ...unhandledProps,\n            disabled,\n            className: classes.root,\n            onBlur: handleBlur,\n            onFocus: handleFocus,\n            onClick: handleClick,\n          })}\n        >\n          {childrenExist(children) ? children : createShorthand(composeOptions.slots.icon, icon, slotProps.icon)}\n        </ElementType>\n      </Ref>\n    );\n\n    const submenuElement = menuOpen ? (\n      <Unstable_NestingAuto>\n        {(getRefs, nestingRef) => {\n          return (\n            <>\n              <Ref\n                innerRef={(node: HTMLElement) => {\n                  nestingRef.current = node;\n                  menuRef.current = node;\n                }}\n              >\n                <Popper align=\"start\" position=\"above\" targetRef={itemRef} {...positioningProps}>\n                  <ToolbarVariablesProvider value={mergedVariables}>\n                    {createShorthand(composeOptions.slots.menu || menuSlot || ToolbarMenu, menu, {\n                      defaultProps: () => slotProps.menu,\n                      overrideProps: handleMenuOverrides(getRefs),\n                    })}\n                  </ToolbarVariablesProvider>\n                </Popper>\n              </Ref>\n              <EventListener listener={handleOutsideClick(getRefs)} target={context.target} type=\"click\" capture />\n            </>\n          );\n        }}\n      </Unstable_NestingAuto>\n    ) : null;\n\n    if (popup) {\n      const popupElement = createShorthand(composeOptions.slots.popup, popup, {\n        defaultProps: () => slotProps.popup,\n        overrideProps: {\n          trigger: itemElement,\n          children: undefined, // force-reset `children` defined for `Popup` as it collides with the `trigger`\n        },\n      });\n      setEnd();\n\n      return popupElement;\n    }\n\n    // wrap the item if it has menu (even if it is closed = not rendered)\n    if (menu) {\n      const contentElement = (\n        <>\n          {itemElement}\n          {submenuElement}\n        </>\n      );\n\n      if (wrapper) {\n        const wrapperElement = createShorthand(composeOptions.slots.wrapper, wrapper, {\n          defaultProps: () => getA11yProps('wrapper', slotProps.wrapper || {}),\n          overrideProps: predefinedProps => ({\n            children: contentElement,\n            onClick: e => {\n              handleWrapperClick(e);\n              _.invoke(predefinedProps, 'onClick', e);\n            },\n          }),\n        });\n        setEnd();\n\n        return wrapperElement;\n      }\n\n      setEnd();\n      return contentElement;\n    }\n\n    setEnd();\n\n    return itemElement;\n  },\n  {\n    className: toolbarItemClassName,\n    displayName: 'ToolbarItem',\n\n    slots: {\n      icon: ToolbarItemIcon,\n      wrapper: ToolbarItemWrapper,\n      popup: Popup, // TODO: compose Popup to ToolbarItemPopup once it has compose functionality\n    },\n\n    slotProps: () => ({\n      popup: { trapFocus: true },\n    }),\n\n    shorthandConfig: { mappedProp: 'content' },\n    handledProps: [\n      'accessibility',\n      'as',\n      'children',\n      'className',\n      'content',\n      'design',\n      'styles',\n      'disabledFocusable',\n      'variables',\n      'active',\n      'disabled',\n      'icon',\n      'menu',\n      'menuOpen',\n      'onMenuOpenChange',\n      'onClick',\n      'onFocus',\n      'onBlur',\n      'popup',\n      'wrapper',\n    ],\n  },\n);\n\nToolbarItem.propTypes = {\n  ...commonPropTypes.createCommon(),\n  active: PropTypes.bool,\n  disabled: PropTypes.bool,\n  disabledFocusable: PropTypes.bool,\n  icon: customPropTypes.shorthandAllowingChildren,\n  menu: PropTypes.oneOfType([\n    customPropTypes.shorthandAllowingChildren,\n    PropTypes.arrayOf(customPropTypes.shorthandAllowingChildren),\n  ]),\n  menuOpen: PropTypes.bool,\n  onMenuOpenChange: PropTypes.func,\n  onClick: PropTypes.func,\n  onFocus: PropTypes.func,\n  onBlur: PropTypes.func,\n  popup: PropTypes.oneOfType([\n    PropTypes.shape({\n      ...Popup.propTypes,\n      trigger: customPropTypes.never,\n      children: customPropTypes.never,\n    }),\n    PropTypes.string,\n  ]),\n  wrapper: customPropTypes.shorthandAllowingChildren,\n};\nToolbarItem.defaultProps = {\n  as: 'button',\n  accessibility: toolbarItemBehavior,\n  wrapper: {},\n};\n"],"file":"ToolbarItem.js"}