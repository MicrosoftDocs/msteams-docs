{"version":3,"sources":["components/Animation/useAnimationStyles.ts"],"names":["unstable_getStyles","getStyles","unstable_createAnimationStyles","createAnimationStyles","useFluentContext","animationCache","WeakMap","animationClassName","useAnimationStyles","displayName","props","theme","rtl","disableAnimations","renderer","performance","className","animationDuration","animationDelay","animation","name","keyframeParams","duration","delay","iterationCount","direction","fillMode","playState","timingFunction","cacheEnabled","enableStylesCaching","cachePerTheme","cacheKey","has","set","get","JSON","stringify","allDisplayNames","primaryDisplayName","componentProps","inlineStylesProps","styles","enableSanitizeCssPlugin","enableVariablesCaching","enableBooleanVariablesCaching","saveDebug","telemetry","undefined","classes","result","root"],"mappings":"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","sourcesContent":["import {\n  ComponentAnimationProp,\n  unstable_getStyles as getStyles,\n  unstable_createAnimationStyles as createAnimationStyles,\n  useFluentContext,\n} from '@fluentui/react-bindings';\nimport { ThemePrepared } from '@fluentui/styles';\n\nimport * as _ from 'lodash';\nimport { AnimationProps } from './Animation';\n\ntype UseAnimationStylesResult = {\n  className: string;\n  animationDuration?: string;\n  animationDelay?: string;\n};\n\nconst animationCache = new WeakMap<ThemePrepared, Record<string, UseAnimationStylesResult>>();\nexport const animationClassName = 'ui-animation';\n\nexport const useAnimationStyles = (displayName: string, props: AnimationProps): UseAnimationStylesResult => {\n  const { theme, rtl, disableAnimations, renderer, performance } = useFluentContext();\n\n  if (disableAnimations) {\n    return {\n      className: animationClassName,\n      animationDuration: '0ms',\n      animationDelay: '0ms',\n    };\n  }\n\n  const animation: ComponentAnimationProp = {\n    name: props.name,\n    keyframeParams: props.keyframeParams,\n    duration: props.duration,\n    delay: props.delay,\n    iterationCount: props.iterationCount,\n    direction: props.direction,\n    fillMode: props.fillMode,\n    playState: props.playState,\n    timingFunction: props.timingFunction,\n  };\n\n  const cacheEnabled = performance.enableStylesCaching;\n\n  let cachePerTheme = {};\n  let cacheKey = '';\n\n  if (cacheEnabled) {\n    if (!animationCache.has(theme)) {\n      animationCache.set(theme, {});\n    }\n\n    cachePerTheme = animationCache.get(theme);\n    cacheKey = JSON.stringify(animation);\n\n    if (cachePerTheme[cacheKey]) {\n      return cachePerTheme[cacheKey];\n    }\n  }\n\n  const { classes, styles } = getStyles({\n    allDisplayNames: [displayName],\n    className: animationClassName,\n    primaryDisplayName: displayName,\n    componentProps: {},\n    inlineStylesProps: {\n      styles: createAnimationStyles(animation, theme),\n    },\n\n    disableAnimations,\n    renderer,\n    rtl,\n    performance: {\n      enableSanitizeCssPlugin: false,\n      enableStylesCaching: false,\n      enableVariablesCaching: false,\n      enableBooleanVariablesCaching: false,\n    },\n    saveDebug: _.noop,\n    theme,\n    telemetry: undefined,\n  });\n\n  const result: UseAnimationStylesResult = {\n    className: classes.root,\n    animationDuration: styles.root.animationDuration as string,\n    animationDelay: styles.root.animationDelay as string,\n  };\n\n  if (cacheEnabled) {\n    cachePerTheme[cacheKey] = result;\n    animationCache.set(theme, cachePerTheme);\n  }\n\n  return result;\n};\n"],"file":"useAnimationStyles.js"}