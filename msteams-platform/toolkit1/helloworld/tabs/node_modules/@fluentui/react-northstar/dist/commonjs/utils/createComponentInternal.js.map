{"version":3,"sources":["utils/createComponentInternal.ts"],"names":["createComponentInternal","displayName","className","shorthandPropName","defaultProps","handledProps","propTypes","actionHandlers","render","mergedDefaultProps","as","FluentComponent","props","ref","React","useRef","context","isFirstRenderRef","concat","state","config","saveDebug","fluentUIDebug","current","deprecated_className","create","Component","mappedProp"],"mappings":";;;;;;;;;AAAA;;AACA;;AAGA;;AACA;;;;;;AAmBO,IAAMA,uBAAuB,GAAG,SAA1BA,uBAA0B,OASuB;AAAA,8BAR5DC,WAQ4D;AAAA,MAR5DA,WAQ4D,iCAR9C,mBAQ8C;AAAA,4BAP5DC,SAO4D;AAAA,MAP5DA,SAO4D,+BAPhD,qBAOgD;AAAA,mCAN5DC,iBAM4D;AAAA,MAN5DA,iBAM4D,sCANxC,UAMwC;AAAA,+BAL5DC,YAK4D;AAAA,MAL5DA,YAK4D,kCAL7C,EAK6C;AAAA,+BAJ5DC,YAI4D;AAAA,MAJ5DA,YAI4D,kCAJ7C,EAI6C;AAAA,MAH5DC,SAG4D,QAH5DA,SAG4D;AAAA,MAF5DC,cAE4D,QAF5DA,cAE4D;AAAA,MAD5DC,OAC4D,QAD5DA,MAC4D;AAC5D,MAAMC,kBAAkB;AACtBC,IAAAA,EAAE,EAAE;AADkB,KAElBN,YAFkB,CAAxB;;AAKA,MAAMO,eAA6C,GAAG,SAAhDA,eAAgD,CAACC,KAAD,EAAkC;AACtF;AACA;AACA,QAAMC,GAAG,GAAGC,KAAK,CAACC,MAAN,CAAa,IAAb,CAAZ;AAEA,QAAMC,OAAO,GAAG,sCAAhB;AACA,QAAMC,gBAAgB,GAAGH,KAAK,CAACC,MAAN,CAAsB,IAAtB,CAAzB;AAEA,WAAO,sCACL;AACEb,MAAAA,SAAS,EAATA,SADF;AAEED,MAAAA,WAAW,EAAXA,WAFF;AAGEI,MAAAA,YAAY,EAAE,oBAAOC,SAAP,EAAkBY,MAAlB,CAAyBb,YAAzB,CAHhB;AAIEO,MAAAA,KAAK,EAALA,KAJF;AAKEO,MAAAA,KAAK,EAAE,EALT;AAMEZ,MAAAA,cAAc,EAAdA,cANF;AAOEC,MAAAA,MAAM,EAAE,gBAAAY,MAAM;AAAA,eAAIZ,OAAM,CAACY,MAAD,EAASR,KAAT,CAAV;AAAA,OAPhB;AAQES,MAAAA,SAAS,EAAE,mBAAAC,aAAa;AAAA,eAAKT,GAAG,CAACU,OAAJ,GAAc;AAAED,UAAAA,aAAa,EAAbA;AAAF,SAAnB;AAAA,OAR1B;AASEL,MAAAA,gBAAgB,EAAhBA;AATF,KADK,EAYLD,OAZK,CAAP;AAcD,GAtBD;;AAwBAL,EAAAA,eAAe,CAACa,oBAAhB,GAAuCtB,SAAvC;AAEAS,EAAAA,eAAe,CAACc,MAAhB,GAAyB,uCAAuB;AAC9CC,IAAAA,SAAS,EAAEjB,kBAAkB,CAACC,EADgB;AAE9CiB,IAAAA,UAAU,EAAExB;AAFkC,GAAvB,CAAzB;AAKAQ,EAAAA,eAAe,CAACV,WAAhB,GAA8BA,WAA9B;AAEAU,EAAAA,eAAe,CAACL,SAAhB,GAA4BA,SAA5B,CAvC4D,CAuCrB;;AAEvCK,EAAAA,eAAe,CAACP,YAAhB,GAA+BK,kBAA/B;AAEA,SAAOE,eAAP;AACD,CArDM","sourcesContent":["import { AccessibilityActionHandlers, useFluentContext } from '@fluentui/react-bindings';\nimport * as React from 'react';\nimport * as _ from 'lodash';\n\nimport { renderComponent, RenderResultConfig } from './renderComponent';\nimport { createShorthandFactory, ShorthandFactory } from './factories';\nimport { ObjectOf } from '../types';\n\nexport interface CreateComponentConfig<P> {\n  displayName: string;\n  className?: string;\n  shorthandPropName?: string;\n  defaultProps?: Partial<P>;\n  handledProps?: string[];\n  propTypes?: React.WeakValidationMap<P>;\n  actionHandlers?: AccessibilityActionHandlers;\n  render: (config: RenderResultConfig<P>, props: P) => React.ReactNode;\n}\n\nexport type CreateComponentReturnType<P> = React.FunctionComponent<P> & {\n  deprecated_className: string;\n  create: ShorthandFactory<P>;\n};\n\nexport const createComponentInternal = <P extends ObjectOf<any> = any>({\n  displayName = 'FluentUIComponent',\n  className = 'fluent-ui-component',\n  shorthandPropName = 'children',\n  defaultProps = {},\n  handledProps = [],\n  propTypes,\n  actionHandlers,\n  render,\n}: CreateComponentConfig<P>): CreateComponentReturnType<P> => {\n  const mergedDefaultProps = {\n    as: 'div',\n    ...(defaultProps as any),\n  };\n\n  const FluentComponent: CreateComponentReturnType<P> = (props): React.ReactElement<P> => {\n    // Stores debug information for component.\n    // Note that this ref should go as the first one, to be discoverable by debug utils.\n    const ref = React.useRef(null);\n\n    const context = useFluentContext();\n    const isFirstRenderRef = React.useRef<boolean>(true);\n\n    return renderComponent(\n      {\n        className,\n        displayName,\n        handledProps: _.keys(propTypes).concat(handledProps),\n        props,\n        state: {},\n        actionHandlers,\n        render: config => render(config, props),\n        saveDebug: fluentUIDebug => (ref.current = { fluentUIDebug }),\n        isFirstRenderRef,\n      },\n      context,\n    );\n  };\n\n  FluentComponent.deprecated_className = className;\n\n  FluentComponent.create = createShorthandFactory({\n    Component: mergedDefaultProps.as,\n    mappedProp: shorthandPropName,\n  });\n\n  FluentComponent.displayName = displayName;\n\n  FluentComponent.propTypes = propTypes; // TODO: generate prop types\n\n  FluentComponent.defaultProps = mergedDefaultProps;\n\n  return FluentComponent;\n};\n"],"file":"createComponentInternal.js"}