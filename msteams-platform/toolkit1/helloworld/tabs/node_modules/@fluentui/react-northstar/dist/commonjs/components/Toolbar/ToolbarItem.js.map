{"version":3,"sources":["components/Toolbar/ToolbarItem.tsx"],"names":["toolbarItemClassName","ToolbarItem","props","ref","composeOptions","context","displayName","telemetry","setStart","setEnd","accessibility","active","className","design","icon","children","disabled","disabledFocusable","popup","menuOpen","wrapper","styles","variables","menu","positioningProps","itemRef","React","useRef","menuRef","parentVariables","useContext","ToolbarVariablesContext","mergedVariables","ToolbarMenuContext","menuSlot","v","slots","getA11yProps","debugName","actionHandlers","performClick","event","preventDefault","handleClick","performWrapperClick","handleWrapperClick","closeMenuAndFocusTrigger","trySetMenuOpen","current","doNotNavigateNextToolbarItem","stopPropagation","mapPropsToBehavior","as","String","hasMenu","hasPopup","rtl","mapPropsToStyles","mapPropsToInlineStyles","unstable_props","classes","handleBlur","e","handleFocus","nativeEvent","target","handleOutsideClick","getRefs","isItemClick","isNestedClick","childRef","isInside","newValue","handleMenuOverrides","predefinedProps","onBlur","isInsideOrMenuTrigger","contains","relatedTarget","onItemClick","itemProps","ElementType","slotProps","resolveSlotProps","unhandledProps","handledProps","itemElement","node","root","onFocus","onClick","submenuElement","nestingRef","ToolbarMenu","defaultProps","overrideProps","popupElement","trigger","undefined","contentElement","wrapperElement","ToolbarItemIcon","ToolbarItemWrapper","Popup","trapFocus","shorthandConfig","mappedProp","propTypes","commonPropTypes","createCommon","PropTypes","bool","customPropTypes","shorthandAllowingChildren","oneOfType","arrayOf","onMenuOpenChange","func","shape","never","string","toolbarItemBehavior"],"mappings":"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","sourcesContent":["import { Accessibility, toolbarItemBehavior, ToolbarItemBehaviorProps } from '@fluentui/accessibility';\nimport {\n  compose,\n  getElementType,\n  mergeVariablesOverrides,\n  useUnhandledProps,\n  useFluentContext,\n  useAccessibility,\n  useStyles,\n  useTelemetry,\n  useContextSelectors,\n} from '@fluentui/react-bindings';\nimport { handleRef, Ref } from '@fluentui/react-component-ref';\nimport { EventListener } from '@fluentui/react-component-event-listener';\nimport { GetRefs, NodeRef, Unstable_NestingAuto } from '@fluentui/react-component-nesting-registry';\nimport * as customPropTypes from '@fluentui/react-proptypes';\nimport * as _ from 'lodash';\nimport * as PropTypes from 'prop-types';\nimport * as React from 'react';\n\nimport {\n  createShorthand,\n  doesNodeContainClick,\n  UIComponentProps,\n  ChildrenComponentProps,\n  ContentComponentProps,\n  commonPropTypes,\n  childrenExist,\n} from '../../utils';\nimport { ComponentEventHandler, ShorthandValue, ShorthandCollection } from '../../types';\nimport { partitionPopperPropsFromShorthand, Popper, PopperShorthandProps } from '../../utils/positioner';\n\nimport { ToolbarMenu, ToolbarMenuProps } from './ToolbarMenu';\nimport { Popup, PopupProps } from '../Popup/Popup';\nimport { ToolbarMenuItemProps } from '../Toolbar/ToolbarMenuItem';\nimport { ToolbarItemShorthandKinds } from './Toolbar';\nimport { ToolbarVariablesContext, ToolbarVariablesProvider } from './toolbarVariablesContext';\nimport { ToolbarItemWrapper, ToolbarItemWrapperProps } from './ToolbarItemWrapper';\nimport { ToolbarItemIcon, ToolbarItemIconProps } from './ToolbarItemIcon';\nimport { ToolbarItemSubscribedValue, ToolbarMenuContext } from './toolbarMenuContext';\n\nexport interface ToolbarItemProps extends UIComponentProps, ChildrenComponentProps, ContentComponentProps {\n  /** Accessibility behavior if overridden by the user. */\n  accessibility?: Accessibility<ToolbarItemBehaviorProps>;\n\n  /** A toolbar item can be active. */\n  active?: boolean;\n\n  /** A toolbar item can show it is currently unable to be interacted with. */\n  disabled?: boolean;\n\n  /** A toolbar item can be disabled and focusable at the same time. */\n  disabledFocusable?: boolean;\n\n  /** Name or shorthand for Toolbar Item Icon */\n  icon?: ShorthandValue<ToolbarItemIconProps>;\n\n  /**\n   * Shorthand for the submenu.\n   * If submenu is specified, the item is wrapped to group the item and the menu elements together.\n   */\n  menu?:\n    | ShorthandValue<ToolbarMenuProps & { popper?: PopperShorthandProps }>\n    | ShorthandCollection<ToolbarMenuItemProps, ToolbarItemShorthandKinds>;\n\n  /** Indicates if the menu inside the item is open. */\n  menuOpen?: boolean;\n\n  /**\n   * Event for request to change 'menuOpen' value.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props and proposed value.\n   */\n  onMenuOpenChange?: ComponentEventHandler<ToolbarItemProps>;\n\n  /**\n   * Called on click.\n   *\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onClick?: ComponentEventHandler<ToolbarItemProps>;\n\n  /**\n   * Called after user's focus.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onFocus?: ComponentEventHandler<ToolbarItemProps>;\n\n  /**\n   * Called after item blur.\n   * @param event - React's original SyntheticEvent.\n   * @param data - All props.\n   */\n  onBlur?: ComponentEventHandler<ToolbarItemProps>;\n\n  /**\n   * Attaches a `Popup` component to the ToolbarItem.\n   * Accepts all props as a `Popup`, except `trigger` and `children`.\n   * Traps focus by default.\n   * @see PopupProps\n   */\n  popup?: Omit<PopupProps, 'trigger' | 'children'> | string;\n\n  /** Shorthand for the wrapper component. The item is wrapped only if it contains a menu! */\n  wrapper?: ShorthandValue<ToolbarItemWrapperProps>;\n}\n\nexport type ToolbarItemStylesProps = Required<Pick<ToolbarItemProps, 'active' | 'disabled'>>;\n\nexport const toolbarItemClassName = 'ui-toolbar__item';\n\n/**\n * A ToolbarItem renders Toolbar item as a button with an icon.\n */\nexport const ToolbarItem = compose<'button', ToolbarItemProps, ToolbarItemStylesProps, {}, {}>(\n  (props, ref, composeOptions) => {\n    const context = useFluentContext();\n    const { setStart, setEnd } = useTelemetry(composeOptions.displayName, context.telemetry);\n    setStart();\n\n    const {\n      accessibility,\n      active,\n      className,\n      design,\n      icon,\n      children,\n      disabled,\n      disabledFocusable,\n      popup,\n      menuOpen,\n      wrapper,\n      styles,\n      variables,\n    } = props;\n    const [menu, positioningProps] = partitionPopperPropsFromShorthand(props.menu);\n\n    const itemRef = React.useRef<HTMLElement>();\n    const menuRef = React.useRef<HTMLElement>();\n\n    const parentVariables = React.useContext(ToolbarVariablesContext);\n    const mergedVariables = mergeVariablesOverrides(parentVariables, variables);\n\n    const { menuSlot } = (useContextSelectors(ToolbarMenuContext, {\n      menuSlot: v => v.slots.menu,\n    }) as unknown) as ToolbarItemSubscribedValue; // TODO: we should improve typings for the useContextSelectors\n\n    const getA11yProps = useAccessibility(accessibility, {\n      debugName: composeOptions.displayName,\n      actionHandlers: {\n        performClick: event => {\n          event.preventDefault();\n          handleClick(event);\n        },\n        performWrapperClick: event => {\n          handleWrapperClick(event);\n        },\n        closeMenuAndFocusTrigger: event => {\n          trySetMenuOpen(false, event);\n          _.invoke(itemRef.current, 'focus');\n        },\n        doNotNavigateNextToolbarItem: event => {\n          event.stopPropagation();\n        },\n      },\n      mapPropsToBehavior: () => ({\n        as: String(props.as),\n        disabled,\n        disabledFocusable,\n        hasMenu: !!menu,\n        hasPopup: !!popup,\n        menuOpen,\n        active,\n      }),\n      rtl: context.rtl,\n    });\n    const { classes } = useStyles<ToolbarItemStylesProps>(composeOptions.displayName, {\n      className: composeOptions.className,\n      composeOptions,\n      mapPropsToStyles: () => ({ active, disabled: disabled || disabledFocusable }),\n      mapPropsToInlineStyles: () => ({\n        className,\n        design,\n        styles,\n        variables: mergedVariables,\n      }),\n      rtl: context.rtl,\n      unstable_props: props,\n    });\n\n    const handleBlur = (e: React.SyntheticEvent) => {\n      _.invoke(props, 'onBlur', e, props);\n    };\n\n    const handleFocus = (e: React.SyntheticEvent) => {\n      _.invoke(props, 'onFocus', e, props);\n    };\n\n    const handleClick = (e: React.MouseEvent | React.KeyboardEvent) => {\n      if (disabled || disabledFocusable) {\n        e.preventDefault();\n        return;\n      }\n\n      if (menu) {\n        trySetMenuOpen(!menuOpen, e);\n      }\n\n      _.invoke(props, 'onClick', e, props);\n    };\n\n    const handleWrapperClick = (e: React.MouseEvent | React.KeyboardEvent) => {\n      if (menu) {\n        if (doesNodeContainClick(menuRef.current, e.nativeEvent as MouseEvent, context.target, false)) {\n          trySetMenuOpen(false, e);\n        }\n      }\n    };\n\n    const handleOutsideClick = (getRefs: GetRefs) => (e: MouseEvent) => {\n      const isItemClick = doesNodeContainClick(itemRef.current, e, context.target);\n      const isNestedClick = _.some(getRefs(), (childRef: NodeRef) => {\n        return doesNodeContainClick(childRef.current as HTMLElement, e, context.target);\n      });\n      const isInside = isItemClick || isNestedClick;\n\n      if (!isInside) {\n        trySetMenuOpen(false, e);\n      }\n    };\n\n    const trySetMenuOpen = (newValue: boolean, e: Event | React.SyntheticEvent) => {\n      _.invoke(props, 'onMenuOpenChange', e, { ...props, menuOpen: newValue });\n    };\n\n    const handleMenuOverrides = (getRefs: GetRefs) => (predefinedProps: ToolbarMenuProps) => ({\n      onBlur: (e: React.FocusEvent) => {\n        const isInsideOrMenuTrigger = _.some(getRefs(), (childRef: NodeRef) => {\n          return (\n            childRef.current.contains(e.relatedTarget as HTMLElement) ||\n            itemRef.current.contains(e.relatedTarget as HTMLElement)\n          );\n        });\n\n        if (!isInsideOrMenuTrigger) {\n          trySetMenuOpen(false, e);\n        }\n      },\n      onItemClick: (e, itemProps: ToolbarMenuItemProps) => {\n        const { popup, menuOpen } = itemProps;\n        _.invoke(predefinedProps, 'onItemClick', e, itemProps);\n        if (popup) {\n          return;\n        }\n        // TODO: should we pass toolbarMenuItem to the user callback so he can decide if he wants to close the menu?\n        trySetMenuOpen(menuOpen, e);\n      },\n    });\n\n    const ElementType = getElementType(props);\n    const slotProps = composeOptions.resolveSlotProps<ToolbarItemProps>(props);\n    const unhandledProps = useUnhandledProps(composeOptions.handledProps, props);\n\n    const itemElement = (\n      <Ref\n        innerRef={node => {\n          itemRef.current = node;\n          handleRef(ref, node);\n        }}\n      >\n        <ElementType\n          {...getA11yProps('root', {\n            ...unhandledProps,\n            disabled,\n            className: classes.root,\n            onBlur: handleBlur,\n            onFocus: handleFocus,\n            onClick: handleClick,\n          })}\n        >\n          {childrenExist(children) ? children : createShorthand(composeOptions.slots.icon, icon, slotProps.icon)}\n        </ElementType>\n      </Ref>\n    );\n\n    const submenuElement = menuOpen ? (\n      <Unstable_NestingAuto>\n        {(getRefs, nestingRef) => {\n          return (\n            <>\n              <Ref\n                innerRef={(node: HTMLElement) => {\n                  nestingRef.current = node;\n                  menuRef.current = node;\n                }}\n              >\n                <Popper align=\"start\" position=\"above\" targetRef={itemRef} {...positioningProps}>\n                  <ToolbarVariablesProvider value={mergedVariables}>\n                    {createShorthand(composeOptions.slots.menu || menuSlot || ToolbarMenu, menu, {\n                      defaultProps: () => slotProps.menu,\n                      overrideProps: handleMenuOverrides(getRefs),\n                    })}\n                  </ToolbarVariablesProvider>\n                </Popper>\n              </Ref>\n              <EventListener listener={handleOutsideClick(getRefs)} target={context.target} type=\"click\" capture />\n            </>\n          );\n        }}\n      </Unstable_NestingAuto>\n    ) : null;\n\n    if (popup) {\n      const popupElement = createShorthand(composeOptions.slots.popup, popup, {\n        defaultProps: () => slotProps.popup,\n        overrideProps: {\n          trigger: itemElement,\n          children: undefined, // force-reset `children` defined for `Popup` as it collides with the `trigger`\n        },\n      });\n      setEnd();\n\n      return popupElement;\n    }\n\n    // wrap the item if it has menu (even if it is closed = not rendered)\n    if (menu) {\n      const contentElement = (\n        <>\n          {itemElement}\n          {submenuElement}\n        </>\n      );\n\n      if (wrapper) {\n        const wrapperElement = createShorthand(composeOptions.slots.wrapper, wrapper, {\n          defaultProps: () => getA11yProps('wrapper', slotProps.wrapper || {}),\n          overrideProps: predefinedProps => ({\n            children: contentElement,\n            onClick: e => {\n              handleWrapperClick(e);\n              _.invoke(predefinedProps, 'onClick', e);\n            },\n          }),\n        });\n        setEnd();\n\n        return wrapperElement;\n      }\n\n      setEnd();\n      return contentElement;\n    }\n\n    setEnd();\n\n    return itemElement;\n  },\n  {\n    className: toolbarItemClassName,\n    displayName: 'ToolbarItem',\n\n    slots: {\n      icon: ToolbarItemIcon,\n      wrapper: ToolbarItemWrapper,\n      popup: Popup, // TODO: compose Popup to ToolbarItemPopup once it has compose functionality\n    },\n\n    slotProps: () => ({\n      popup: { trapFocus: true },\n    }),\n\n    shorthandConfig: { mappedProp: 'content' },\n    handledProps: [\n      'accessibility',\n      'as',\n      'children',\n      'className',\n      'content',\n      'design',\n      'styles',\n      'disabledFocusable',\n      'variables',\n      'active',\n      'disabled',\n      'icon',\n      'menu',\n      'menuOpen',\n      'onMenuOpenChange',\n      'onClick',\n      'onFocus',\n      'onBlur',\n      'popup',\n      'wrapper',\n    ],\n  },\n);\n\nToolbarItem.propTypes = {\n  ...commonPropTypes.createCommon(),\n  active: PropTypes.bool,\n  disabled: PropTypes.bool,\n  disabledFocusable: PropTypes.bool,\n  icon: customPropTypes.shorthandAllowingChildren,\n  menu: PropTypes.oneOfType([\n    customPropTypes.shorthandAllowingChildren,\n    PropTypes.arrayOf(customPropTypes.shorthandAllowingChildren),\n  ]),\n  menuOpen: PropTypes.bool,\n  onMenuOpenChange: PropTypes.func,\n  onClick: PropTypes.func,\n  onFocus: PropTypes.func,\n  onBlur: PropTypes.func,\n  popup: PropTypes.oneOfType([\n    PropTypes.shape({\n      ...Popup.propTypes,\n      trigger: customPropTypes.never,\n      children: customPropTypes.never,\n    }),\n    PropTypes.string,\n  ]),\n  wrapper: customPropTypes.shorthandAllowingChildren,\n};\nToolbarItem.defaultProps = {\n  as: 'button',\n  accessibility: toolbarItemBehavior,\n  wrapper: {},\n};\n"],"file":"ToolbarItem.js"}